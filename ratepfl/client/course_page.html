<template name="coursePage" xmlns="http://www.w3.org/1999/html">


    <div class="container content-holder">

        {{#if course}}

        {{#with course}}
        <br>
        <h2 class="center">{{title}} <label class="light grey-text" style="font-size: 0.75em;">{{teacher}}</label></h2>
        <h3 class="center"></h3>
        <h4 class="center light grey-text">{{label}} - {{semesterName}}</h4>
            <br/>
         <div class="center">
        <label>Comments</label> <b>{{commentsNb}}</b> - <label>Overall Rating</label> <b>{{overallrating}}</b>
        </div>
        {{/with}}


        <div class="row">

            <h4 class="center">Rate this course!</h4>
            <br>

            <div class="nbHoursHeader rating-header">

                <div class="col s3">Hours per week</div>
                <div class="col s9">
                {{#each zeroToTen}}
                <i class="mdi-av-timer nbhoursrating {{getNbHoursColor}}" data-nbhoursrating="{{this}}"></i>
                {{/each}}
                {{getHoursComment}}
                </div>
            </div>

            <div class="teacherHeader rating-header">

                <div class="col s3">Teacher</div>
                <div class="col s9">
                {{#each oneToTen}}
                <i class="mdi-action-thumb-up teacherRating {{getTeacherRatingColor}}" data-teacherrating="{{this}}"></i>
                {{/each}}
                {{getTeacherComment}}
            </div>
            </div>

             <div class="difficultyHeader rating-header">

                <div class="col s3">Difficulty</div>
                <div class="col s9">
                {{#each oneToTen}}
                <i class="mdi-action-accessibility difficultyRating {{getDifficultyRatingColor}}" data-difficultyrating="{{this}}"></i>
                {{/each}}
                {{getDifficultyComment}}
            </div>
            </div>



             <div class="interestHeader rating-header">

                <div class="col s3">Interest</div>
                <div class="col s9">
                {{#each oneToTen}}
                <i class="mdi-action-favorite interestRating {{getInterestRatingColor}}" data-interestrating="{{this}}"></i>
                {{/each}}
                {{getInterestComment}}
            </div>
            </div>

             <div class="usefulnessHeader rating-header">

                <div class="col s3">Usefulness</div>
                <div class="col s9">
                {{#each oneToTen}}
                <i class="mdi-action-trending-up usefulnessRating {{getUsefulnessRatingColor}}" data-usefulnessrating="{{this}}"></i>
                {{/each}}
                {{getUsefulnessComment}}
            </div>
            </div>


        </div>

        <div class="row">
            <a class="waves-effect waves-light btn statsBtn">Statistics</a>
        </div>
        {{#if displayStats}}
        {{> courseStats}}
        {{/if}}


        <br/><br/>


        <div class="row">

            <hr/>

            <!-- SUBPARTS -->
            <div class="col s3">
                <p class="center">Subparts</p>
                <div class="collection">
                    <a class="subpart-general collection-item {{activeSubpartGeneral}}">General<label class="secondary-content">{{commentCountForGeneral}}</label></a>
                    {{#each subparts}}
                        <a class="subpart collection-item {{activeSubpart}}">{{name}}<label class="secondary-content">{{commentCountForPart}}</label></a>
                    {{/each}}
                    <a class="modal-trigger collection-item light text-lighten-3 add-subpart" href="#modal-add-subpart">Create subpart<i class="mdi-content-add secondary-content"></i></a>
                </div>
            </div>
            <!-- SUBPART ENDS-->


            <!-- COMMENTS-->
            <div class="col s9 row">
                <div class="center">
                    <p><a href="#" class="best-button {{getUnderline 'best'}}">Best</a> | <a href="#" class="new-button {{getUnderline 'new'}}">New</a></p>
                </div>
            {{#each comments}}
            <div class="col s12">
                <div class="card">
                    <div class="card-content black-text">
                        <span class=" black-text card-title">{{content}}</span>
                    </div>

                    <div class="card-action row" style="padding: 10px; margin: 0">

                        <div class="col s4">
                            {{formatDate timestamp}}
                        </div>
                        <div class="col s8 right-align">

                        <a class="green-text {{lightenUpvote}} upvote"><i class="mdi-content-add-circle"></i>{{upvotes}}</a>
                        <a class="red-text {{lightenDownvote}} downvote"><i class="mdi-content-remove-circle"></i>{{downvotes}}</a>

                        </div>

                    </div>
                </div>
            </div>
            {{/each}}
            </div>
            <!--COMMENTS ENDS-->


            <!-- ADD COMMETN MODAL -->
            <div class="fixed-action-btn" style="bottom: 45px; right: 45px;">
                <a class="modal-trigger btn-floating btn-large waves-effect waves-light red" href="#modal-add-comment">
                    <i class="large mdi-content-add"></i>
                </a>
            </div>

            <div id="modal-add-comment" class="modal">
                <form class="new-comment">
                    <div class="modal-content">
                        <h4>Comment on this course</h4>
                        <textarea id="comment-textarea" class="materialize-textarea" name="comment"></textarea>
                        <label for="comment-textarea">Share what you think</label>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="waves-effect waves-green btn-flat">Comment</button>
                        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
                    </div>
                </form>
            </div>
            <!-- ADD COMMENT MODAL ENDS-->


            <!--ADD SUBPART MODAL-->
            <div id="modal-add-subpart" class="modal">
                <form class="new-subpart">
                    <div class="modal-content">
                        <h4>Create a new subpart</h4>
                        <p>For instance: Project #1, Homework #8, Quizz on Matrice Addition, Midterm ...</p>
                        <input id="subpart-input" type="text" class="validate" name="subpart">
                        <label for="subpart-input">Name the new subpart</label>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="waves-effect waves-green btn-flat">Comment</button>
                        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
                    </div>
                </form>
            </div>
            <!--ADD SUBPART MODAL ENDS-->

        </div>

        {{else}}

            <h2>Oups, we can't find this course</h2>
            <h4>Try selecting a course from the <a href="/">list</a></h4>
            <br/>
        {{/if}}

    </div>

    <script>
        $(document).ready(function(){
            // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
            $('.modal-trigger').leanModal();
        });
    </script>



</template>